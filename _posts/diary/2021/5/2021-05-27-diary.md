---
layout: post
title:  "05/27"
date:   2021-05-27 23:27:02 +0900
categories: diary
---
# 日記

今日の天気は雨。

雨だったが強い気持ちで昼に牛タンを食べに行った。店員さんに覚えられてしまったらしく、入店時にアルコール消毒をしているときに「いつもありがとうございます～」と言われてしまった。みんなマスクをしているのでそもそもこちらは店員さんの顔がよくわかっていないのだが......。

他の人がバグらせていた C++ のコードを画面共有しながらデバッグしたりした。結論から言うと、`wchar_t**` 型の配列 `arr` を作るときに `arr[0] = (std::wstring(L"unko") + L"unko"s).c_str(), arr[1] = (std::wstring(L"unko") + L"unko"s).c_str()...` みたいに書いていたのだけど、ここで `arr[0], arr[1], ...` には各文字列の先頭文字へのポインタ (`wchar_t*` 型)が入るけどその前に一時的に作られる `(std::wstring(L"unko") + L"unko"s)` のアドレスが不定なせいで一時的な書き込み領域の衝突が発生して問題が起こっていた。これのせいで、 5 回に 1 回くらいは正常に出力されるけどその他の場合は文字化けしたり韓国語が現れたりと悲惨なことになっていて、延々苦労したらしい。こういうの、テストの問題としてどこが間違ってるでしょうと言われたらすぐわかるだろうけどいざ直面すると悩んでしまう。今回は、`(std::wstring(L"unko") + L"unko"s)` の部分をそれぞれ `std::wstring` 型の配列に格納したうえで `.c_str()` で `wchar_t*` 型に変換して代入していくことで事なきを得た。

Rust 、[標準ライブラリ(std)のドキュメント](https://doc.rust-lang.org/std/)を読んでいけばええやんということに気付いた。こういうのひたすら読むのは大好きなので、明日から読みまくっていきたい。

# やったこと

- C++