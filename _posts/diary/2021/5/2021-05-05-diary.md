---
layout: post
title:  "05/05"
date:   2021-05-05 15:21:00 +0900
categories: diary
---
# 日記

今日の天気は曇りのち雨。

連休最終日は出かけようかと思っていたが、天気の悪さに萎えて引きこもることに。まあどうせ行きたい場所はだいたい休業してるからな......。そんなことを思っていると緊急事態宣言延長とかいうニュースが流れてきた。ほんま勘弁してくれー。23 日のコンサート無くなったら発狂する。

競プロ用自動化ツールでバグやら TODO が溜まっていてえらいことになっていたので大幅にリファクタリングした。サンプルチェッカーのコードに色々と問題があって、テストケースの一部が不正解になったときや出力が空文字列のときに表示が乱れたりしていたので修正した。コード自体もかなりすっきりしたので、満足。ついでに TLE や RE の判定も追加した。これはそれぞれ ```subprocess.TimeoutExpired``` と ```subprocess.CalledProcessError``` で例外処理すれば簡単。TLE については、ローカルとジャッジサーバでだいぶ CPU の速度が違う(ローカルの方が遅い)ので適当に 3 秒で打ち切ることにした。ジャッジサーバでは ```O2``` でコンパイルされるところローカルではコンパイル時間短縮のために ```O1``` でコンパイルしているので、そもそも厳密に実行時間を計測する気はない。他に、コンテスト全体ではなく特定の問題だけダウンロードするためのオプション、コンテストの問題数が 6 問ではないときに問題数を指定するためのオプションも指定できるようにした。[これ](https://stackoverflow.com/questions/287871/how-to-print-colored-text-to-the-terminal)を参考に、"AC" とか "WA" を色付きで出力するようにもしておいた。あとは、バイナリ提出の機能を付けたいなー。

昨日詰まっていた AtCoder の問題を無理矢理通した。二通りの解法を投げてみたら、一方(A)では 2 ケース TLE で他のケースは全部正解、もう一方(B)では実行時間は速いけど 6 ケース WA になった。幸運なことに(？)それぞれの解法で不正解のケースが重なっていなかったので、コードの中で実行時間を計測して実行制限時間 3 秒のうち 1.5 秒は A でやって終わっていなかったら B でやる、とかいう嘘解法のキメラを提出して無事 AC した。この方法、コンテスト中にはできない(コンテスト中はどのケースが AC でどのケースが WA になったか、はシャッフルされて情報が得られない)ので、厳密にはずるい。

久しぶりにリアルワールドバグハンティングを読み進めた。明日には読み終えられそう。積読消化する時間がなかなかないので、 1 日 50 時間くらい欲しい。

ゴールデンウィーク中に積み立て NISA とかを始めるつもりだったが結局できていない......。まあ開発合宿で投資に詳しい人から話を聞けたし自分でも色々と調べたので 5 月中には始められそう。

# やったこと

- Python
- C++
- リアルワールドバグハンティング