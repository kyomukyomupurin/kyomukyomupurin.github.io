---
layout: post
title:  "10/3"
date:   2020-10-3 09:00:00 +0900
categories: diary
---
# 日記

今日はいい天気。一年の中で一番過ごしやすいくらいの陽気かもしれない。

VSCode の Python 拡張で Pylance というのを入れてみた。Microsoft 謹製の拡張で、なんか以前に比べてコードがカラフルになった気がする。型チェックとかモジュールの import 周りの補完が強くなってるみたいで、割と良さそう。ところで Rust やら Python やらの拡張機能を色々と追加してるし git リポジトリの数も増えてきたので VSCode 立ち上げてからもろもろの起動が終わるまでの時間が少し長くなってきた...。

セグ木とかの内部だけで持つ配列って ```std::vector``` ではなくて生配列にした方が厳密には速いのでは？という気がしてきたのであとで試してみたい。と思ったけど、実際に試したら ```malloc``` でメモリ確保しないといけないしその割に速くならなかった。

C 言語の ```strcpy``` 関数を自分で実装してみたのだけど、少しテクニカルな書き方をするとかなり短く書けた。可読性さんが犠牲になってる感は否めない。

{% highlight cpp %}
#include <stdio.h>

void my_strcpy(char* str1, char* str2) {
  char* ptr1 = str1;
  char* ptr2 = str2;

  while (*ptr1++ = *ptr2++) {}

  return;
}

int main() {
  char str1[16];
  char* str2 = "Hello, World!";

  my_strcpy(str1, str2);

  printf("%s\n", str1);
  printf("%s\n", str2);

  return 0;
}
{% endhighlight %}

C で関数に ```int``` 型の配列の配列を渡すときは引数の型が ```int (*arr)[]``` でリテラル文字列の配列を渡すときは ```char* strs[]``` なのややこしいなって思ってたけど、```()``` で優先順位をつけていると考えると前者は(固定長の)配列への**ポインタ**で後者はポインタ(文字列リテラルは先頭の文字へのポインタなので)の**配列**(まあポインタに読み替えられるのだけど)なので、それはそうだなってなった。```char str[] = {'a', 'b', 'c', 'd'};``` みたいに ```char``` 型の配列を宣言したときに ```str[4]``` に ```'\0'``` が入ることが保証されてるのかが手元で実験しただけではよくわからない。あまり深入りしすぎない方がいいのかな、規格の変遷に振り回されるのはつらいし...。

# やったこと

- C 言語
- AtCoder 1 問
